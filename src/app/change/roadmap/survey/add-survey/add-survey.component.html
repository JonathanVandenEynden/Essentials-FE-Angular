<app-nav-bar>
  <div class="container-fluid m-5">
    <h2>Add survey to "{{this.roadmapItem.title}}"</h2>
    <div>
      <form [formGroup]="surveyFrom" (ngSubmit)="onSubmit()">
        <div formArrayName="questions">
          <div *ngFor="let question of getQuestions(surveyFrom); let i = index">
            <div [formGroupName]="i" class="questionbox d-flex">
              <mat-form-field class="typeselection">
                <mat-select placeholder="type" aria-label="question type" formControlName="type">
                  <mat-option *ngFor="let type of questionTypes" [value]="type">
                    {{type}}
                  </mat-option>
                </mat-select>
                <!--              <mat-error *ngIf="surveyFrom.get('type')['errors'] && surveyFrom.get('type').touched">-->
                <!--                {{ getErrorMessage(surveyFrom.get('type')['errors']) }}-->
                <!--              </mat-error>-->
              </mat-form-field>
              <br>
              <mat-form-field class="questionfield">
                <input matInput type="text" aria-label="Question" formControlName="question" placeholder="question"/>
                <!--              <mat-error *ngIf="surveyFrom.get('question')['errors'] && surveyFrom.get('question').touched">-->
                <!--                {{ getErrorMessage(surveyFrom.get('question')['errors']) }}-->
                <!--              </mat-error>-->
              </mat-form-field>
              <div class="answerbox">
              <div formArrayName="answers">
                <div [formGroupName]="j" *ngFor="let answer of getAnswers(question); let j = index">
                  <mat-form-field>
                    <input matInput type="text" placeholder="answer" formControlName="answer" />
                  </mat-form-field>
                </div>
              </div>
<!--              button voor add answer-->
              <button class="btn active" (click)="addAnswer(question)">
                <fa-icon [icon]="faPlus" ></fa-icon>Add answer
              </button>
              </div>
            </div>
          </div>
          <button class="btn active" (click)="addQuestion(surveyFrom)">
            <fa-icon [icon]="faPlus" ></fa-icon>Add question
          </button>
        </div>
        <!--submitbutton-->
        <br>
        <button type="submit" mat-raised-button>Create survey</button>
      </form>
    </div>
  </div>
</app-nav-bar>
